{"./":{"url":"./","title":"内容简介","keywords":"","body":"内容简介 俗话说“好记性不如烂笔头”，这里主要是记录华为认证考试学习过程中掌握的核心知识点和领悟。 目前，我对网络有一些基本的认识，熟悉Linux系统中各种网络的配置，也熟悉OpenStack虚拟网络的实现。 但是在网络设备、广域网及安全设备等方面缺乏经验，所以就想借着考证倒逼下自己，一方面可以更系统的 学习网络及安全方面的知识，弥补自己在这方面的短板，另一方面，通过考试作为自己对这些新知识掌握 情况的一个考核。 powered by Gitbooktime： 2019-02-20 13:49:16 "},"HCIA-RS/1-enterprise-network-arch.html":{"url":"HCIA-RS/1-enterprise-network-arch.html","title":"1.1 企业网络架构","keywords":"","body":"企业网络架构介绍 企业组网的基本需求 与企业的业务及规模密切相关 - 大型企业通常跨越多个物理位置，需要使用远程互联技术来 连接总部与分支机构 连接企业与合作伙伴或客户 为出差人员提供移动办公 需要考虑数据的私密性和安全性 企业网络的基本架构 小型企业网络： 采用扁平的网络架构 缺乏冗余，可靠性不高 大型企业网络： 对业务的连续性要求很高 通过网络设备冗余来保证网络的可用性和稳定性 采用分层的网络架构 需要对资源进行访问控制 需要对流量进行细粒度的控制 采用模块化设计，实现网络隔离并简化网络维护 powered by Gitbooktime： 2019-02-20 11:13:39 "},"HCIA-RS/2-media.html":{"url":"HCIA-RS/2-media.html","title":"1.2 传输介质","keywords":"","body":"传输介质 传输介质对网络通信的影响主要有： 线路编码方式 传输速度 传输距离 传输介质有多种形式： 物理线缆 无线电波 同轴电缆 早起的以太网采用同轴电缆传输数据，同轴电缆有两种标准： 10BASE2（细缆）：5mm，最长传输距离185米 10BASE5（粗缆）：9.5mm，最长传输距离500米 两个标准的传输速率都是10Mbps，这个速率很难满足企业网络的需求，现在很少采用了。 双绞线 双绞线就是最常见的网线，应用非常普遍，百兆千兆的双绞线随处可见。双绞线主要有如下的类型： 3类双绞线：速率10Mbps 5类双绞线：速率100Mbps 超5类双绞线：速率100/1000Mbps 双绞线使用RJ-45接头连接网络设备，RJ-45接头中的针脚必须按照一定的线序排列。 光纤 同轴电缆和双绞线都使用电信号传输数据。光纤使用光信号传输数据，能够实现更长距离、更高带宽的数据传输。 根据光纤传输光信号模式的不同，光纤可以分为： 单模光纤：只传输一种模式的光 不存在色散，传输距离长， 多模光纤：允许不同模式的光同时传输 存在色散，只适合短距离传输 串口电缆 常见串口标准： RS-232：传输速率有限，传输距离仅6米 RS-422：传输距离1200米 RS-485：传输距离1200米 冲突域 共享式网络中存在信号冲突的问题，常见的解决方法是载波侦听多路访问/冲突检测技术（CSMA/CD：Carrier Sense Multiple Access/Collision Detection）。 CSMA/CD工作过程如下： 终端设备不停地检测共享线路的状态。如果线路空闲，则可以发送数据；如果线路不空闲，则等待一段时间后继续检测（延时时间由退避算法决定）。 如果有另外一个设备同时发送数据，两个设备发送的数据会产生冲突。 终端设备检测到冲突之后，会马上停止发送自己的数据，并发送特殊阻塞信息，以强化冲突信号，使线路上其他站点能够尽早检测到冲突。 终端设备检测到冲突后，等待一段时间之后再进行数据发送（延时时间由退避算法决定）。 CSMA/CD的工作原理可简单总结为：先听后发，边发边听，冲突停发，随机延迟后重发。 powered by Gitbooktime： 2019-02-20 11:13:39 "},"HCIA-RS/3-ethernet.html":{"url":"HCIA-RS/3-ethernet.html","title":"1.3 以太网帧结构","keywords":"","body":"以太网帧结构 OSI分层模型 OSI参考模型各个层次分层如下： 物理层：在设备之间传输比特流，规定了电平、速度、电缆针脚 数据链路层：将比特组合成字节，再将字节组合成帧，使用链路层地址来访问介质，并进行差错检测； 网络层：提供逻辑地址，供路由器确定路径； 传输层：提供面向连接或非面向连接的数据传递以及数据重传前的差错检测； 会话层：负责建立、管理、终止表示层实体之间的通信会话，该层的通信由不同设备中的应用程序之间的请求和响应组成； 表示层：提供各种用于应用层数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系统的应用层识别； 应用层：为应用程序提供网络服务。 TCP/IP分层模型 TCP/IP模型将网络分为四层，TCP/IP模型不关注底层物理介质，主要关注终端之间的逻辑数据流转发。 TCP/IP模型的核心是网络层和传输层，网络层解决网络之间的逻辑转发问题，传输层保证源端到目的端之间的可靠传输。 TCP/IP每层都使用该层的协议数据单元PDU（protocol data unit）彼此交换信息，不同层的PDU有不同的名称： 传输层：segment（数据段） 网络层：packet（数据包） 数据链路层：frame (帧) 帧格式 以太网帧有两种格式，如下图所示： 以太网中绝大多数帧都是Ethernet II格式。 Ethernet II格式 各个字段的含义如下： DMAC： 目的MAC地址，标识帧的接收者； SMAC：源MAC地址，标识帧的发送者； Type：长度是2字节，标识高层协议；取值为0x0800代表IP协议帧，取值为0x0806代表ARP协议帧 Data：数据字段是网络层数据，最小长度46字节，最大长度1500字节； FCS（循环冗余校验字段）：是一种错误检测机制，该字段4字节。 IEEE 802.3 格式 与Ehternet II格式类似，不过原来的Type字段别Length取代（数字小于等于1500），并占用了Data字段8个字节用作LLC和SNAP。具体如下： Length：定义Data字段包含的字节数（必须小于等于1500） LLC（Logical Link Control）：逻辑链路控制，由DSAP（Destination Service Access Point）、SSAP（Source Service Access Point）及Control字段组成； SNAP（Sub-network Access Protocol）：有机构代码和类型字段组成。Type字段与Ethernet II帧的Type字段相同。 MAC地址 MAC地址是全球唯一的，长度是48 bit，分层两部分： OUI（Organization Unique Identifier）：IEEE统一分配给设备制造商的代号； 后面24 bit由制造商自行分配； 帧的传输 局域网上的帧可以通过三种方式发送 单播 MAC地址的OUI中，第一个字节第8比特为0，表示这是一个单播地址 帧从单一源发送给单一的目的端 同一冲突域中，所有主机都能收到源主机发送的单播帧，但是发现其目的地址不是本地的MAC地址后，会丢弃收到的帧，只有真正的目的主机才会接收并处理收到的帧 广播 帧从单一源发送给共享以太网上所有的主机 广播的目的MAC地址为：FF:FF:FF:FF:FF:FF 所有收到该广播帧的主机都要接收并处理帧 大量的广播会导致带宽利用率降低，进而影响整个网络的性能 组播 组播可以理解为选择性的广播，主机侦听特定组播地址，接收并处理目的MAC地址为该组播MAC地址的帧 组播目的MAC地址的第一个字节的第8比特为1 帧的接收流程 if frame.dmac != local mac or frame.dmac != boradcast mac or frame.dmac != multicast mac; then drop frame endif calculate fcs; if frame.fcs is wrong; then drop frame endif strip frame header and tail; dispatch frame accounding to type filed; powered by Gitbooktime： 2019-02-20 12:16:37 "},"HCIA-RS/4-IP.html":{"url":"HCIA-RS/4-IP.html","title":"1.4 IP编址","keywords":"","body":"IP编址 IP数据帧格式 IP报文结构 IP报文结构如下图所示： IP报文头部长度为20~60字节，各个字段的含义如下： version：长度4比特；标识目前所使用的IP协议的版本号。一般值为0100（IPv4）和0110（IPv6） header length：长度4比特，描述IP头部的长度；注意单位是4字节，如果值为1111，那么IP头部长度为15*4=60字节； DS Field：早起用来表示业务类型，现在用于支持qos中的差分服务模型，实现网络流量优化； total length：长度16比特，以字节为单位计算IP包的长度； identification：长度16比特，需要与flags & fragment offset联合使用，实现数据包的分片； flags：长度3比特； bit 0：预留，必须为0； bit 1（DF）：表明路由器是否可以对数据包进行分片；为0表示可以，为1表示不能分片；如果不允许分片，且超过了目的链路的MTU，则路由器会丢弃该报文，并返回一个错误信息； bit 2（MF）：为0表示Last fragment，为1表示More fragment； fragment offset：数据包分片后，本数据包在原报文的位置； time to live：数据包没经过一个路由器，该字段值减少1，如果减为0，则路由器会丢弃改数据包； Protocol：标识上层所使用的协议，以便把数据包传递给上层协议处理； header checksum：IP头部校验和； source IP address：源IP地址； Destination IP address：目的IP地址； IP编址 IP地址用来标识网络中的设备，IP地址的结构如下： IPv4的地址为32比特，分成两部分： 网络号：表示IP地址所属的网段； 主机号：用来唯一标识本网段上的某台网络设备； 特殊的IP地址： 网络地址：IP地址的主机位全为0，表示一个网段； 广播地址：IP地址的主机位全为1 IP地址分类 IP地址分成A、B、C、D、E五类。 D类地址为组播地址，主机收到D类地址为目的地址的报文后，且该主机是该组播组成员，就会接收并处理报文。 私网地址 为了减少公网地址的消耗，在A、B、C类地址中各预留了一些地址段作为私网地址，这类地址的数据包不能在公网上传输。私网地址默认不能和公网地址进行通信，需要转换为公网地址才能和公网地址通信。私网地址范围如下： 10.0.0.0/8 172.16.0.0/12 ~ 172.31.0.0/12 192.168.0.0/16 特殊地址 127.0.0.0/8：环回地址，不出网络设备，主要用来诊断网络是否正常； 0.0.0.0：标识任何网络，在路由协议中会用到； 255.255.255.255：广播地址； 将IP地址划分成5类，带来的一个问题是IP地址使用率低。解决方法是采用VLSM（变长子网掩码）。 无类域间路由 无类域间路由（CIDR：Classless Inter Domain Routing）将路由表中的若干条路由汇聚成一条路由，减少了路由表的规模，提高了路由器的可扩展性。 网关 如果目的主机和源主机不在同一个网段，报文需要先转发到网关，然后通过网关将报文转发到目的网段。 网关是指接收并处理本地网段主机发送的报文并转发到目的网段的设备。 网关连接本地网段的接口地址就是该网段的网关地址。 IP包分片 网络中转发的IP报文长度可以不同，如果报文长度超过了数据链路所支持的最大报文长度，则报文就需要分割成若干个较小的片段才能够在链路上传输。将报文分割成多个片段的过程叫做分片。 分片发生在发送到链路层之前，如果链路的MTU不同，就需要执行分片。 分片到达目的IP才会重组。报文在网络传输过程中，可能经过多次分片，因此没有必要在中间设备上进行重组。 因为传输过程中可能发生多次分片，因此，Fragment Offset必须是分片在整个IP报文的偏移量，才能在目的端进行重组。 powered by Gitbooktime： 2019-02-20 18:45:42 "}}